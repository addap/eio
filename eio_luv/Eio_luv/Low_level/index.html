<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Low_level (eio_luv.Eio_luv.Low_level)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.2.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">eio_luv</a> &#x00BB; <a href="../index.html">Eio_luv</a> &#x00BB; Low_level</nav><header class="odoc-preamble"><h1>Module <code><span>Eio_luv.Low_level</span></code></h1></header><nav class="odoc-toc"><ul><li><a href="#time-functions">Time functions</a></li><li><a href="#dns-functions">DNS functions</a></li><li><a href="#low-level-wrappers-for-luv-functions">Low-level wrappers for Luv functions</a></li></ul></nav><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-or_error"><a href="#type-or_error" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a or_error</span></span><span> = <span><span>(<span class="type-var">'a</span>, <span class="xref-unresolved">Luv</span>.Error.t)</span> <span class="xref-unresolved">Stdlib</span>.result</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_loop"><a href="#val-get_loop" class="anchor"></a><code><span><span class="keyword">val</span> get_loop : <span>unit <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Luv</span>.Loop.t</span></code></div><div class="spec-doc"><p><code>get_loop ()</code> returns the current fiber's event loop.</p><p>When using the <code>Luv</code> API directly, you <b>must</b> pass this to any Luv function that accepts a loop as an optional argument in order to use the resource with Eio. The wrapper functions in this file all do this for you.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-or_raise"><a href="#val-or_raise" class="anchor"></a><code><span><span class="keyword">val</span> or_raise : <span><span><span class="type-var">'a</span> <a href="#type-or_error">or_error</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>or_raise (Error e)</code> raises <code>Eio.Exn.Io</code> with <code>e</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-await_with_cancel"><a href="#val-await_with_cancel" class="anchor"></a><code><span><span class="keyword">val</span> await_with_cancel : 
  <span>request:
    <span><span>[&lt; `File <span>| `Addr_info</span> <span>| `Name_info</span> <span>| `Random</span> <span>| `Thread_pool</span> ]</span> <span class="xref-unresolved">Luv</span>.Request.t</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="xref-unresolved">Luv</span>.Loop.t <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span><span>(<span class="type-var">'a</span>, <span class="xref-unresolved">Luv</span>.Error.t)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'a</span>, <span class="xref-unresolved">Luv</span>.Error.t)</span> <span class="xref-unresolved">Stdlib</span>.result</span></span></code></div><div class="spec-doc"><p><code>await_with_cancel ~request fn</code> converts a function using a luv-style callback to one using effects. It sets the fiber's cancel function to cancel <code>request</code>, and clears it when the operation completes.</p></div></div><h2 id="time-functions"><a href="#time-functions" class="anchor"></a>Time functions</h2><div class="odoc-spec"><div class="spec value anchored" id="val-sleep_until"><a href="#val-sleep_until" class="anchor"></a><code><span><span class="keyword">val</span> sleep_until : <span>float <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>sleep_until time</code> blocks until the current time is <code>time</code>.</p></div></div><h2 id="dns-functions"><a href="#dns-functions" class="anchor"></a>DNS functions</h2><div class="odoc-spec"><div class="spec value anchored" id="val-getaddrinfo"><a href="#val-getaddrinfo" class="anchor"></a><code><span><span class="keyword">val</span> getaddrinfo : <span>service:string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="../../../eio/Eio/Net/Sockaddr/index.html#type-t">Eio.Net.Sockaddr.t</a> list</span></span></code></div><div class="spec-doc"><p><code>getaddrinfo ~service host</code> returns a list of IP addresses for <code>host</code>. <code>host</code> is either a domain name or an ipaddress.</p></div></div><h2 id="low-level-wrappers-for-luv-functions"><a href="#low-level-wrappers-for-luv-functions" class="anchor"></a>Low-level wrappers for Luv functions</h2><div class="odoc-spec"><div class="spec module anchored" id="module-File"><a href="#module-File" class="anchor"></a><code><span><span class="keyword">module</span> <a href="File/index.html">File</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Random"><a href="#module-Random" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Random/index.html">Random</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Handle"><a href="#module-Handle" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Handle/index.html">Handle</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Stream"><a href="#module-Stream" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Stream/index.html">Stream</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Pipe"><a href="#module-Pipe" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Pipe/index.html">Pipe</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Process"><a href="#module-Process" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Process/index.html">Process</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div></div></body></html>