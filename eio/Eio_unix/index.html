<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Eio_unix (eio.Eio_unix)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.2.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">eio</a> &#x00BB; Eio_unix</nav><header class="odoc-preamble"><h1>Module <code><span>Eio_unix</span></code></h1><p>Extension of <a href="../Eio/index.html"><code>Eio</code></a> for integration with OCaml's <code>Unix</code> module.</p><p>Note that OCaml's <code>Unix</code> module is not safe, and therefore care must be taken when using these functions. For example, it is possible to leak file descriptors this way, or to use them after they've been closed, allowing one module to corrupt a file belonging to an unrelated module.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type extension anchored" id="extension-decl-Unix_error"><a href="#extension-decl-Unix_error" class="anchor"></a><code><span><span class="keyword">type</span> <a href="../Eio/Exn/Backend/index.html#type-t">Eio.Exn.Backend.t</a> += </span></code><ol><li id="extension-Unix_error" class="def extension anchored"><a href="#extension-Unix_error" class="anchor"></a><code><span>| </span><span><span class="extension">Unix_error</span> <span class="keyword">of</span> <span class="xref-unresolved">Unix</span>.error * string * string</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Wrapper for embedding <code>Unix</code>.Unix_error errors.</p><span class="comment-delim">*)</span></div></li></ol></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-unix_fd"><a href="#type-unix_fd" class="anchor"></a><code><span><span class="keyword">type</span> unix_fd</span><span> = <span>&lt; unix_fd : <span><span>[ `Peek <span>| `Take</span> ]</span> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Unix</span>.file_descr &gt;</span></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-socket"><a href="#type-socket" class="anchor"></a><code><span><span class="keyword">type</span> socket</span><span> = <span>&lt; <a href="../Eio/Flow/class-two_way/index.html">Eio.Flow.two_way</a> ; <a href="../Eio/Flow/class-type-close/index.html">Eio.Flow.close</a> ; <a href="#type-unix_fd">unix_fd</a> &gt;</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-await_readable"><a href="#val-await_readable" class="anchor"></a><code><span><span class="keyword">val</span> await_readable : <span><span class="xref-unresolved">Unix</span>.file_descr <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>await_readable fd</code> blocks until <code>fd</code> is readable (or has an error).</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-await_writable"><a href="#val-await_writable" class="anchor"></a><code><span><span class="keyword">val</span> await_writable : <span><span class="xref-unresolved">Unix</span>.file_descr <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>await_writable fd</code> blocks until <code>fd</code> is writable (or has an error).</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-FD"><a href="#module-FD" class="anchor"></a><code><span><span class="keyword">module</span> <a href="FD/index.html">FD</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Convert between <code>Unix.file_descr</code> and Eio objects.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Ipaddr"><a href="#module-Ipaddr" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Ipaddr/index.html">Ipaddr</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Convert between Eio.Net.Ipaddr and Unix.inet_addr.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-sleep"><a href="#val-sleep" class="anchor"></a><code><span><span class="keyword">val</span> sleep : <span>float <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>sleep d</code> sleeps for <code>d</code> seconds, allowing other fibers to run. This is can be useful for debugging (e.g. to introduce delays to trigger a race condition) without having to plumb <a href="../Eio/Stdenv/index.html#val-mono_clock"><code>Eio.Stdenv.mono_clock</code></a> through your code. It can also be used in programs that don't care about tracking determinism.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-run_in_systhread"><a href="#val-run_in_systhread" class="anchor"></a><code><span><span class="keyword">val</span> run_in_systhread : <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>run_in_systhread fn</code> runs the function <code>fn</code> in a newly created system thread (a <code>Thread</code>.t). This allows blocking calls to be made non-blocking.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-socketpair"><a href="#val-socketpair" class="anchor"></a><code><span><span class="keyword">val</span> socketpair : 
  <span>sw:<a href="../Eio/Switch/index.html#type-t">Eio.Std.Switch.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>?domain:<span class="xref-unresolved">Unix</span>.socket_domain <span class="arrow">&#45;&gt;</span></span>
  <span>?ty:<span class="xref-unresolved">Unix</span>.socket_type <span class="arrow">&#45;&gt;</span></span>
  <span>?protocol:int <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-socket">socket</a> * <a href="#type-socket">socket</a></span></code></div><div class="spec-doc"><p><code>socketpair ~sw ()</code> returns a connected pair of flows, such that writes to one can be read by the other. This creates OS-level resources using <code>socketpair(2)</code>. Note that, like all FDs created by Eio, they are both marked as close-on-exec by default.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pipe"><a href="#val-pipe" class="anchor"></a><code><span><span class="keyword">val</span> pipe : 
  <span><a href="../Eio/Switch/index.html#type-t">Eio.Std.Switch.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>&lt; <a href="../Eio/Flow/class-source/index.html">Eio.Flow.source</a>
  ; <a href="../Eio/Flow/class-type-close/index.html">Eio.Flow.close</a>
  ; <a href="#type-unix_fd">unix_fd</a> &gt;</span>
  * <span>&lt; <a href="../Eio/Flow/class-sink/index.html">Eio.Flow.sink</a>
  ; <a href="../Eio/Flow/class-type-close/index.html">Eio.Flow.close</a>
  ; <a href="#type-unix_fd">unix_fd</a> &gt;</span></span></code></div><div class="spec-doc"><p><code>pipe sw</code> returns a connected pair of flows <code>src</code> and <code>sink</code>. Data written to <code>sink</code> can be read from <code>src</code>. Note that, like all FDs created by Eio, they are both marked as close-on-exec by default.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Private"><a href="#module-Private" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Private/index.html">Private</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>API for Eio backends only.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Ctf"><a href="#module-Ctf" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Ctf/index.html">Ctf</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-getnameinfo"><a href="#val-getnameinfo" class="anchor"></a><code><span><span class="keyword">val</span> getnameinfo : <span><a href="../Eio/Net/Sockaddr/index.html#type-t">Eio.Net.Sockaddr.t</a> <span class="arrow">&#45;&gt;</span></span> string * string</span></code></div><div class="spec-doc"><p><code>getnameinfo sockaddr</code> returns domain name and service for <code>sockaddr</code>.</p></div></div></div></body></html>