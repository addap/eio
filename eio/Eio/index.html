<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Eio (eio.Eio)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">eio</a> &#x00BB; Eio</nav><header class="odoc-preamble"><h1>Module <code><span>Eio</span></code></h1><p>Effects based parallel IO for OCaml.</p><p>Eio provides support for concurrency (juggling many tasks) and parallelism (using multiple CPU cores for performance).</p><p>It provides facilities for creating and coordinating fibers (light-weight threads) and domains (for parallel processing), as well as interfaces for interacting with resources provided by the operating system.</p><p>These features must be used within an <em>event loop</em>, provided by an Eio <em>backend</em>. Applications can use <code>Eio_main</code>.run to run a suitable loop.</p><p>See <a href="https://github.com/ocaml-multicore/eio">https://github.com/ocaml-multicore/eio</a> for a tutorial.</p></header><nav class="odoc-toc"><ul><li><a href="#concurrency-primitives">Concurrency primitives</a></li><li><a href="#cross-platform-os-api">Cross-platform OS API</a></li><li><a href="#errors-and-debugging">Errors and Debugging</a></li><li><a href="#provider-api-for-os-schedulers">Provider API for OS schedulers</a></li></ul></nav><div class="odoc-content"><h2 id="concurrency-primitives"><a href="#concurrency-primitives" class="anchor"></a>Concurrency primitives</h2><div class="odoc-spec"><div class="spec module" id="module-Switch" class="anchored"><a href="#module-Switch" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Switch/index.html">Switch</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Grouping fibers and other resources so they can be turned off together.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Promise" class="anchored"><a href="#module-Promise" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Promise/index.html">Promise</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>A promise is a placeholder for result that will arrive in the future.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Fiber" class="anchored"><a href="#module-Fiber" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Fiber/index.html">Fiber</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>A fiber is a light-weight thread.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Semaphore" class="anchored"><a href="#module-Semaphore" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Semaphore/index.html">Semaphore</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>A counting semaphore.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Mutex" class="anchored"><a href="#module-Mutex" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Mutex/index.html">Mutex</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Mutual exclusion.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Stream" class="anchored"><a href="#module-Stream" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Stream/index.html">Stream</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>A stream/queue.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Cancel" class="anchored"><a href="#module-Cancel" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Cancel/index.html">Cancel</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Cancelling fibers.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Std" class="anchored"><a href="#module-Std" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Std/index.html">Std</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Commonly used standard features. This module is intended to be <code>open</code>ed.</p></div></div><h2 id="cross-platform-os-api"><a href="#cross-platform-os-api" class="anchor"></a>Cross-platform OS API</h2><p>The general pattern here is that each type of resource has a set of functions for using it, plus an object type to allow defining your own implementations. To use the resources, it is recommended that you use the functions rather than calling methods directly. Using the functions results in better error messages from the compiler, and may provide extra features or sanity checks.</p><p>The system resources are available from the <a href="Stdenv/index.html#type-t"><code>Stdenv.t</code></a> provided by your event loop (e.g. <code>Lwt_main</code>.run).</p><div class="odoc-spec"><div class="spec module" id="module-Generic" class="anchored"><a href="#module-Generic" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Generic/index.html">Generic</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>A base class for objects that can be queried at runtime for extra features.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Flow" class="anchored"><a href="#module-Flow" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Flow/index.html">Flow</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Byte streams.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Buf_read" class="anchored"><a href="#module-Buf_read" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Buf_read/index.html">Buf_read</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Buffered input and parsing</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Buf_write" class="anchored"><a href="#module-Buf_write" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Buf_write/index.html">Buf_write</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Buffered output</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Net" class="anchored"><a href="#module-Net" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Net/index.html">Net</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Networking.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Domain_manager" class="anchored"><a href="#module-Domain_manager" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Domain_manager/index.html">Domain_manager</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Parallel computation across multiple CPU cores.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Time" class="anchored"><a href="#module-Time" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Time/index.html">Time</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Clocks, time, sleeping and timeouts.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Fs" class="anchored"><a href="#module-Fs" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Fs/index.html">Fs</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>File-system types.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Path" class="anchored"><a href="#module-Path" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Path/index.html">Path</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Accessing paths on a file-system.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Stdenv" class="anchored"><a href="#module-Stdenv" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Stdenv/index.html">Stdenv</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>The standard environment of a process.</p></div></div><h2 id="errors-and-debugging"><a href="#errors-and-debugging" class="anchor"></a>Errors and Debugging</h2><div class="odoc-spec"><div class="spec value" id="val-traceln" class="anchored"><a href="#val-traceln" class="anchor"></a><code><span><span class="keyword">val</span> traceln : 
  <span>?__POS__:<span>(string * int * int * int)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span class="type-var">'a</span>, <span class="xref-unresolved">Stdlib</span>.Format.formatter, unit, unit )</span> <span class="xref-unresolved">Stdlib</span>.format4</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>traceln fmt</code> outputs a debug message (typically to stderr).</p><p>Trace messages are printed by default and do not require logging to be configured first. The message is printed with a newline, and is flushed automatically. <code>traceln</code> is intended for quick debugging rather than for production code.</p><p>Unlike most Eio operations, <code>traceln</code> will never switch to another fiber; if the OS is not ready to accept the message then the whole domain waits.</p><p>It is safe to call <code>traceln</code> from multiple domains at the same time. Each line will be written atomically.</p><p>Examples:</p><pre><code>traceln &quot;x = %d&quot; x;
traceln &quot;x = %d&quot; x ~__POS__;   (* With location information *)</code></pre><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">__POS__</span> <p>Display <code>__POS__</code> as the location of the <code>traceln</code> call.</p></li></ul></div></div><div class="odoc-spec"><div class="spec module" id="module-Exn" class="anchored"><a href="#module-Exn" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Exn/index.html">Exn</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Reporting multiple failures at once.</p></div></div><h2 id="provider-api-for-os-schedulers"><a href="#provider-api-for-os-schedulers" class="anchor"></a>Provider API for OS schedulers</h2><div class="odoc-spec"><div class="spec module" id="module-Private" class="anchored"><a href="#module-Private" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Private/index.html">Private</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>API for use by the scheduler implementation.</p></div></div></div></body></html>